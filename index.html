<!DOCTYPE html>
<html>
<head>
<title>Keystroke Golf</title>
<link rel="icon" type="image/png" href="http://eqsport.info/wp-content/uploads/2015/05/golf-ball-vector-png-tqwhsntv.png" />
</head>

<body>

<h1 id="challenge">Press an arrow key</h1>
<div>
<p id="score"></p>
<div id = timer>
    <span>Timer: </span><span id="hours">00</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
</div>
<div id = "efficiency ratio"></div>
<div id = "levels"></div>


<script>
// Normally we would turn a keyCode into a string using String.fromCharCode(challenge), however fromCharCode doesn't work with the arrow keys. As a result, I found a workaround at http://stackoverflow.com/a/23377822 that uses a "mapping". I then changed the mapping for the arrow keys (37-40) to their unicode values such as &#x2193.
var keyboardMap = ["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","RETURN","","SHIFT","CONTROL","ALT","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","&#8678","&#8679","&#8680","&#8681","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9","COLON","SEMICOLON","LESS_THAN","EQUALS","GREATER_THAN","QUESTION_MARK","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","WIN","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","CIRCUMFLEX","EXCLAMATION","DOUBLE_QUOTE","HASH","DOLLAR","PERCENT","AMPERSAND","UNDERSCORE","OPEN_PAREN","CLOSE_PAREN","ASTERISK","PLUS","PIPE","HYPHEN_MINUS","OPEN_CURLY_BRACKET","CLOSE_CURLY_BRACKET","TILDE","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","","SEMICOLON","EQUALS","COMMA","MINUS","PERIOD","SLASH","BACK_QUOTE","","","","","","","","","","","","","","","","","","","","","","","","","","","OPEN_BRACKET","BACK_SLASH","CLOSE_BRACKET","QUOTE","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""];

// There are four arrow directions that could be used for the challenge. Up, down, left, and right. All in keycode values.
challenge_options = ['37', '38', '39','40'];

// Create a function that updates the challenge.
function new_challenge() {// Every time the challenge field needs to be updated...
    challenge = challenge_options[Math.floor(Math.random() * challenge_options.length)]; // ...it gets updated with a random selection from those four arrow directions...
    document.getElementById('challenge').innerHTML = keyboardMap[challenge];//String.fromCharCode(challenge); // ...and the #challenge div gets updated with the string form of the challenge keycode.
}

// The user starts off with zero points.
points = 0;

// Create a function that awards points to users.
function streak_extend(amount){// Every time the user is awarded points (positive OR negative)...
    points = points + amount; // ...the score variable gets updated...
    document.getElementById("score").innerHTML = "Streak: "+ points;// and the #score div updates to reflect the updated score.
}

//Create a function that brings point streak to zero
function zero() { //Named the function zero
    points = 0 //Brings points to a zero
    document.getElementById("score").innerHTML = "Streak: "+ points;// Displays points
}

//Create a timer
	var sec = 0;
function pad ( val ) { return val > 9 ? val : "0" + val; }
setInterval( function(){
    document.getElementById("seconds").innerHTML=pad(++sec%60);
    document.getElementById("minutes").innerHTML=pad(parseInt(sec/60,10));
    if (points==0){
    sec = -1;
    }
}, 1000);

//Create an efficiency ratio
function e_ratio(){// named the efficiency ratio e_ratio for short
    ratio=points/sec //made the ratio of points divided by seconds
    Math.floor(ratio);// rounded the ratio
	document.getElementById("efficiency ratio").innerHTML="Efficiency Ratio:" + ratio;// displayed ratio
}

//Create levels
function lvl(){//named function lvl
    level=1 //First level is one
    document.getElementById("levels").innerHTML="Level:" + level; //level is displayed
    if (points>=10){//when you get 10 points...
        level=2 // the level will be 2
        document.getElementById("levels").innerHTML="Level:" + level; //level is displayed
    }
    else if (points>=25){//when you get 25 points...
        level=3 // the level will be 3
        document.getElementById("levels").innerHTML="Level:" + level; //level is displayed
    }
    else if (points>=50){//when you get 50 points...
        level=4 // the level will be 4
        document.getElementById("levels").innerHTML="Level:" + level; //level is displayed
    }
    else if (points>=75){//when you get 75 points...
        level=5 // the level will be 5
        document.getElementById("levels").innerHTML="Level:" + level; //level is displayed
    }
}

// To start the game, the challenge field (which is empty before the game loads) gets immediately updated once the game loads.
new_challenge

document.onkeydown = checkKey;// When the user presses a key,
function checkKey(e) { // Then the program should check to see if the key that was pressed is the same as the current challenge arrow direction
    e = window.event;
    if (e.keyCode == challenge) { // If it is...
        streak_extend(1);// ...then they get awarded +1 points...
        new_challenge();// ...and the challenge is refreshed.
        e_ratio(); //... displays efficiency ratio
        lvl(); //...displays levels
    } else { // But if it is not the same...
        zero();// ...then they get awarded -1 points...
        new_challenge();// ...and the challenge is refreshed.
        e_ratio(); //... displays efficiency ratio
        lvl(); //...displays levels
    }
}

</script>
</div>
<script id="controls"></script>

</body>
</html>
